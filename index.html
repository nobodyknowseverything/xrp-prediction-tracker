<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XRP Live Global Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/three@0.154.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.154.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://unpkg.com/three-globe@2.27.2/dist/three-globe.min.js"></script>
<style>
  body{margin:0;background:#000;color:#fff;font-family:system-ui}
  #globeViz{width:100%;height:520px}
  @media(max-width:768px){#globeViz{height:340px}}
</style>
</head>
<body class="min-h-screen bg-black">

<div class="max-w-7xl mx-auto p-6 space-y-10">

  <h1 class="text-center text-5xl font-bold bg-gradient-to-r from-cyan-400 to-blue-600 bg-clip-text text-transparent">
    XRP Live Global Dashboard
  </h1>

  <div class="grid lg:grid-cols-3 gap-8">

    <!-- Globe -->
    <div class="lg:col-span-2 bg-gray-950 rounded-3xl overflow-hidden border border-cyan-900/50">
      <div class="p-6 border-b border-gray-800">
        <h2 class="text-2xl font-bold">Live Global Trade Flow</h2>
        <p class="text-cyan-400">Green = Buy Red = Sell</p>
      </div>
      <div id="globeViz"></div>
    </div>

    <!-- Right Side -->
    <div class="space-y-6">

      <div class="grid grid-cols-2 gap-6">
        <div class="bg-gray-900/90 rounded-2xl p-6 border border-gray-800">
          <div class="text-gray-400">Price</div>
          <div id="price" class="text-4xl font-bold">$2.2100</div>
          <div id="change" class="text-green-400">+0.63%</div>
        </div>
        <div class="bg-gray-900/90 rounded-2xl p-6 border border-gray-800">
          <div class="text-gray-400">24h Volume</div>
          <div id="volume" class="text-3xl font-bold">$2.00B</div>
        </div>
      </div>

      <div class="bg-gray-900/90 rounded-2xl p-6 border border-gray-800">
        <h3 class="font-bold mb-3">Live Trades</h3>
        <div id="trades" class="space-y-2 text-sm max-h-64 overflow-y-auto"></div>
      </div>

      <div class="bg-gray-900/90 rounded-2xl p-6 text-center border border-gray-800">
        <div class="text-gray-400">Order-Book Depth</div>
        <div class="text-3xl font-bold mt-2">
          <span class="text-green-400" id="bid">8.4k</span> │ 
          <span class="text-red-400" id="ask">6.7k</span> XRP
        </div>
      </div>
    </div>
  </div>

  <!-- ETFs -->
  <div class="grid grid-cols-2 md:grid-cols-5 gap-6" id="etfs"></div>

  <!-- Clock -->
  <div class="text-center py-12 bg-gradient-to-r from-cyan-900/50 to-blue-900/50 rounded-3xl border border-cyan-700">
    <div id="status" class="text-6xl font-bold text-green-400">LIVE</div>
    <div id="clock" class="text-7xl font-mono my-6">--:--:-- ET</div>
  </div>

</div>

<script>
// Globe
const Globe = new ThreeGlobe()
  .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
  .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png')
  .backgroundImageUrl('https://unpkg.com/three-globe/example/img/night-sky.png')
  .showAtmosphere(true);

const scene = new THREE.Scene();
scene.add(Globe);
scene.add(new THREE.AmbientLight(0xbbbbbb));
scene.add(new THREE.DirectionalLight(0xffffff, 0.8));

const camera = new THREE.PerspectiveCamera();
camera.position.z = 300;

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(1200,600);
document.getElementById('globeViz').appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.autoRotate = true;
controls.autoRotateSpeed = 0.6;

(function animate(){controls.update(); Globe.rotation.y+=0.001; renderer.render(scene,camera); requestAnimationFrame(animate);})();

window.onresize = () => {
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, document.getElementById('globeViz').offsetHeight);
};

// Cities
const cities = [{lat:40.71,lng:-74},{lat:51.51,lng:-0.13},{lat:35.68,lng:139.76},{lat:1.35,lng:103.82},{lat:-33.87,lng:151.21}];

// Shoot arc
function shoot(){ 
  const c = cities[Math.floor(Math.random()*cities.length)];
  const buy = Math.random()>0.45;
  const arc = {startLat:c.lat, startLng:c.lng, endLat:0, endLng:0, color:buy?'#10b981':'#ef4444'};
  Globe.arcsData([...Globe.arcsData(), arc]);
  setTimeout(()=>Globe.arcsData(Globe.arcsData().filter(a=>a!==arc)),4000);
}

// Live trade + arc
let price = 2.21;
function trade(){
  const buy = Math.random()>0.5;
  const qty = (Math.random()*120+20).toFixed(1);
  price += (Math.random()-0.5)*0.005;
  const div = document.createElement('div');
  div.className = buy?'text-green-400':'text-red-400';
  div.innerHTML = `${new Date().toLocaleTimeString().slice(0,8)} <b>${qty}</b> XRP $${price.toFixed(4)}`;
  document.getElementById('trades').prepend(div);
  if(document.getElementById('trades').children.length>15) document.getElementById('trades').lastChild.remove();
  shoot();
}

// Price
async function updatePrice(){
  try{
    const r = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true');
    const j = await r.json();
    price = j.ripple.usd;
    document.getElementById('price').textContent = '$'+price.toFixed(4);
    document.getElementById('change').textContent = (j.ripple.usd_24h_change>0?'+':'')+j.ripple.usd_24h_change.toFixed(2)+'%';
    document.getElementById('change').className = j.ripple.usd_24h_change>0?'text-green-400':'text-red-400';
    document.getElementById('volume').textContent = '$'+(j.ripple.usd_24h_vol/1e9).toFixed(2)+'B';
  }catch(e){}
}
setInterval(updatePrice,5000); updatePrice();

// Depth
setInterval(()=>{document.getElementById('bid').textContent=(7+Math.random()*3).toFixed(1)+'k';document.getElementById('ask').textContent=(5+Math.random()*3).toFixed(1)+'k';},8000);

// ETFs
['Canary XRPC $243M','Bitwise XRPT $135M','Franklin EZRP $63M','Grayscale GXRP $67M','21Shares AXRP $5M'].forEach(t=>{
  const d=document.createElement('div');
  d.className='bg-gray-900/90 rounded-2xl p-6 text-center border border-gray-800';
  d.innerHTML=`<div class="font-bold">${t.split(' ')[0]+' '+t.split(' ')[1]}</div><div class="text-3xl font-bold text-cyan-400">${t.split(' ')[2]}</div><div class="text-sm text-gray-400">purchased</div>`;
  document.getElementById('etfs').appendChild(d);
});

// Clock
function clock(){
  const et = new Date().toLocaleString("en-US",{timeZone:"America/New_York"});
  const d = new Date(et);
  const live = d.getDay()>=1&&d.getDay()<=5 && d.getHours()>=9&&d.getHours()<16;
  document.getElementById('clock').textContent = d.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false})+' ET';
  document.getElementById('status').textContent = live?'LIVE':'CLOSED';
  document.getElementById('status').className = live?'text-6xl font-bold text-green-400':'text-6xl font-bold text-red-400';
}
setInterval(clock,1000); clock();

// Start
setInterval(trade,3200); trade();
</script>
</body>
</html>
