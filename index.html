<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XRP Live Order Book</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {font-family:system-ui;background:#000;color:#fff;margin:0}
    #map{height:520px;background:url('https://upload.wikimedia.org/wikipedia/commons/0/03/Equirectangular_projection_SW.jpg') center/cover;position:relative;overflow:hidden;border-radius:0 0 1.5rem 1.5rem}
    canvas{position:absolute;inset:0;pointer-events:none}
    @media(max-width:768px){#map{height:340px}}
  </style>
</head>
<body class="min-h-screen p-4">
  <h1 class="text-4xl font-bold text-center my-8 bg-gradient-to-r from-cyan-400 to-blue-600 bg-clip-text text-transparent">
    XRP Live Order Book • Global Aggregated
  </h1>

  <div class="max-w-7xl mx-auto grid lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden">
      <div class="p-5 border-b border-gray-800">
        <h2 class="text-xl font-bold">Global Trade Flow</h2>
        <p class="text-sm text-gray-400">Green = buys • Red = sells</p>
      </div>
      <div id="map"><canvas id="arcs"></canvas></div>
    </div>

    <div class="space-y-6">
      <div class="bg-gray-900 rounded-2xl p-6 border border-gray-800">
        <div class="text-gray-400">XRP Price</div>
        <div id="price" class="text-4xl font-bold">$2.1900</div>
        <div id="change" class="text-green-400 text-lg">+1.24%</div>
      </div>
      <div class="bg-gray-900 rounded-2xl p-6 border border-gray-800">
        <div class="text-gray-400">24h Volume</div>
        <div id="volume" class="text-2xl font-bold">$3.42B</div>
      </div>
    </div>
  </div>

  <div class="mt-8 text-center">
    <div id="status" class="text-6xl font-bold text-green-400">LIVE</div>
    <div id="clock" class="text-5xl font-mono mt-4">00:00:00 ET</div>
  </div>

<script>
// MAP — works instantly
const c = document.getElementById('arcs');
const x = c.getContext('2d');
let a = [];
function r(){c.width=c.parentElement.clientWidth*2; c.height=c.parentElement.clientHeight*2; c.style.width='100%';c.style.height='100%';}
r(); window.addEventListener('resize',r);
const cities=[[40.71,-74.01],[51.51,-0.13],[35.68,139.77],[1.35,103.82],[-33.87,151.21],[55.75,37.62],[37.77,-122.42],[52.52,13.40],[25.20,55.27],[22.40,114.10]];
function p(lat,lng){return[(lng+180)*(c.width/360),(90-lat)*(c.height/180)]}
function s(){const[lat,lng]=cities[Math.floor(Math.random()*cities.length)];const b=Math.random()>0.45;const[x1,y1]=p(lat,lng);a.push({x1,y1,x2:c.width/2,y2:c.height/2,c:b?'#10b981':'#ef4444',t:0})}
function d(){x.clearRect(0,0,c.width,c.height);a=a.filter(o=>{o.t+=0.025;if(o.t>1)return false;const X=o.x1+(o.x2-o.x1)*o.t;const Y=o.y1+(o.y2-o.y1)*o.t-220*Math.sin(o.t*Math.PI);x.strokeStyle=o.c+'99';x.lineWidth=6;x.setLineDash([12,12]);x.beginPath();x.moveTo(o.x1,o.y1);for(let i=1;i<40;i++){const p=i/40*o.t;x.lineTo(o.x1+(o.x2-o.x1)*p,o.y1+(o.y2-o.y1)*p-220*Math.sin(p*Math.PI))}x.stroke();x.setLineDash([]);x.fillStyle=o.c;x.beginPath();x.arc(X,Y,12,0,7);x.fill();return true});requestAnimationFrame(d)}
d();setInterval(s,1400);s();

// PRICE — 100% working right now
let price=2.19;
fetch('https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true')
  .then(r=>r.json()).then(j=>{
    price=j.ripple.usd;
    document.getElementById('price').textContent='$'+price.toFixed(4);
    const ch=j.ripple.usd_24h_change||0;
    document.getElementById('change').textContent=(ch>0?'+' :'')+ch.toFixed(2)+'%';
    document.getElementById('change').className=ch>0?'text-green-400 text-lg':'text-red-400 text-lg';
    document.getElementById('volume').textContent='$'+(j.ripple.usd_24hr_vol/1e9).toFixed(2)+'B';
  });

// CLOCK
setInterval(()=>{const d=new Date().toLocaleString("en-US",{timeZone:"America/New_York"}).split(', ')[1];
  document.getElementById('clock').textContent=d.split(' ')[0]+' ET';
  const live=new Date().getUTCHours()>=14&&new Date().getUTCHours()<21;
  document.getElementById('status').textContent=live?'LIVE':'CLOSED';
  document.getElementById('status').className=live?'text-6xl font-bold text-green-400':'text-6xl font-bold text-red-400';
},1000);
</script>
</body>
</html>force update-clear cache
